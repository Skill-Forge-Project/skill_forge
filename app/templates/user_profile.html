<!DOCTYPE html>
<html>

<head>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/anvil.png') }}">
    <title>Skill Forge</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/navbar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/table.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/user_profile.css') }}">
    <!-- Track the user status -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/websocket.js') }}"></script>

</head>

<body>
    <!-- Include Navbar template -->
    {% include 'navbar.html' %}

    <div>
        <div class="container mx-auto py-8 user_profile_info">
            <div class="grid grid-cols-4 sm:grid-cols-12 gap-6 px-4">
                <div class="col-span-4 sm:col-span-3">
                    <div class="shadow rounded-lg p-6 user_profile_info left_pane">
                        <div class="flex flex-col items-center">
                            <img class="inline-block w-48 rounded-full user_avatar"
                                src="{{ user.avatar and 'data:image/jpeg;base64,' + avatar_base64 or url_for('static', filename='images/anvil.png') }}"
                                alt="Avatar">
                            <h1 class="text-xl font-bold user_profile_info username">{{user.username}}</h1>
                            <p class="text-l user_profile_info name">{{user.first_name}} {{user.last_name}}</p>
                            <p class="text-sm user_profile_info rank">Rank: {{user.rank}}r</p>
                            <div class="mt-6 flex flex-wrap gap-4 justify-center">
                                <div class="online_status" id="onlineStatusDiv">
                                    {% if user_status == "Offline" %}
                                    <p class="online_status title offline">Last seen</p>
                                    <p class="online_status title offline">{{ last_logged_date.strftime('%d-%m-%Y %H:%M') }}</p>
                                    {% else %}
                                    <p class="online_status title">{{ user_status }}</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <hr class="my-6 border-t border-gray-300">
                        <p class="text-s user_profile_info level">Level: {{user.level}}</p>
                        <div class="flex w-full h-4 bg-gray-200 rounded-full overflow-hidde" role="progressbar"
                            aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="flex flex-col justify-center rounded-full overflow-hidden text-xs text-white text-center whitespace-nowrap dark:bg-blue-500 transition duration-500 user_profile_info xp_points"
                                style='width: {{ xp_percentage }}%;'></div>
                        </div>
                        <p class="text-xs text-center">{{ user.xp }} / {{ max_xp }} XP</p>
                    </div>
                </div>
                <div class="col-span-4 sm:col-span-9">
                    <div class="shadow rounded-lg p-6 user_profile_info left_pane">
                        <!-- About Me Section -->
                        <h2 class="text-xl font-bold mb-4 user_profile_info title">About Me</h2>
                        <p class="text-gray-700 user_profile_info about_me_text">{{ user.about_me }}</p>
                        <p class="text-gray-700 user_profile_info about_me_text">Some Bio Info</p>
                        <!-- User Info Section -->
                        <form>
                            <div class="grid gap-6 mb-6 md:grid-cols-2">
                                <div>
                                    <label for="first_name"
                                        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">First
                                        name</label>
                                    <input type="text" id="first_name"
                                        class="text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field"
                                        placeholder="{{ user.first_name }}" />
                                </div>
                                <div>
                                    <label for="last_name"
                                        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Last
                                        name</label>
                                    <input type="text" id="last_name"
                                        class="text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field"
                                        placeholder="{{ user.last_name }}" required />
                                </div>
                            </div>
                            <div class="mb-6">
                                <label for="email"
                                    class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email
                                    address</label>
                                <input type="email" id="email"
                                    class="text-gray-900 text-sm rounded-lg 
                                focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field"
                                    placeholder="{{ user.email }}" required />
                            </div>
                            <!-- Social Media URLs Section -->
                            <label class="mb-2 text-sm text-black block">Social Media Links</label>
                            <div>
                                <div class="relative flex items-center">
                                    <input type='text' placeholder='{{user.facebook_profile}}'
                                        class="pr-4 pl-14 py-3 text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field" />
                                    <div class="absolute left-4">
                                        <img src="../static/images/facebook.svg" width="12" height="12"
                                            alt="Facebook Profile">
                                    </div>
                                </div>
                                <div class="relative flex items-center">
                                    <input type='text' placeholder='{{user.instagram_profile}}'
                                        class="pr-4 pl-14 py-3 text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field" />
                                    <div class="absolute left-4">
                                        <img src="../static/images/instagram.png" width="18" height="18"
                                            alt="Instagram Profile">
                                    </div>
                                </div>
                                <div class="relative flex items-center">
                                    <input type='text' placeholder='{{user.github_profile}}'
                                        class="pr-4 pl-14 py-3 text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field" />
                                    <div class="absolute left-4">
                                        <img src="../static/images/github.png" width="18" height="18"
                                            alt="GitHub Profile">
                                    </div>
                                </div>
                                <div class="relative flex items-center">
                                    <input type='text' placeholder='{{user.discord_id}}'
                                        class="pr-4 pl-14 py-3 text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field" />
                                    <div class="absolute left-4">
                                        <img src="../static/images/discord.svg" width="18" height="18"
                                            alt="Discord ID">
                                    </div>
                                </div>
                                <div class="relative flex items-center">
                                    <input type='text' placeholder='{{user.linked_in}}'
                                        class="pr-4 pl-14 py-3 text-gray-900 text-sm rounded-lg 
                                        focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 
                                        dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 user_profile_info input_field" />
                                    <div class="absolute left-4">
                                        <img src="../static/images/linkedin.png" width="18" height="18"
                                            alt="LinkedIn Profile">
                                    </div>
                                </div>
                            </div>
                            <button type="submit"
                                class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 
                                font-medium rounded-lg text-sm w-full sm:w-auto mt-4 px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Submit</button>
                        </form>

                        <h3 class="font-semibold text-center mt-3 -mb-2 text-xl font-bold mb-4 user_profile_info title">
                            Find me on
                        </h3>
                        <div class="flex justify-center items-center gap-6 my-6">
                            {% if user.facebook_profile %}
                                <a href="{{ user.facebook_profile }}" target="_blank">
                                    <img src="../static/images/facebook.svg" width="12" height="12" alt="Facebook Profile">
                                </a>
                            {% endif %}
                            {% if user.instagram_profile %}
                                <a href="{{ user.instagram_profile }}" target="_blank">
                                    <img src="../static/images/instagram.png" width="20" height="20" alt="Instagram">
                                </a>
                            {% endif %}
                            {% if user.github_profile %}
                            <a href="{{ user.github_profile }}" target="_blank">
                                <img src="../static/images/github.png" width="22" height="22" alt="GitHub">
                            </a>
                            {% endif %}
                            {% if user.discord_id %}
                            <a href="https://discord.com/users/{{ user.discord_id }}" target="_blank">
                                <img src="../static/images/discord.svg" width="20" height="20" alt="Discord">
                            </a>
                            {% endif %}
                            {% if user.linked_in %}
                            <a href="{{ user.linked_in }}" target="_blank">
                                <img src="../static/images/linkedin.png" width="20" height="20" alt="LinkedIn">
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<footer>
    <!-- Include Footer template -->
    {% include 'footer.html' %}
</footer>

</html>