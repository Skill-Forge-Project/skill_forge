# Use the official Postgres 16 Alpine image as a base
FROM postgres:latest

# Install pg_cron scheduler for Postgres
RUN apt update && apt install -y postgresql-16-cron

# Copy the custom Bash script to modify postgresql.conf after the container starts
COPY setup-postgres.sh /docker-entrypoint-initdb.d/setup-postgres.sh

# Make sure the script is executable
RUN chmod +x /docker-entrypoint-initdb.d/setup-postgres.sh

# Run the custom Bash script
RUN /docker-entrypoint-initdb.d/setup-postgres.sh